<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GwaKawa by Rei</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="bg-decoration"></div>

    <div class="container">

        <div id="login" class="page active">
            <div class="login-container">
                <div class="login-header">
                    <div class="login-icon">
                        <span class="wingding">üìö</span>
                    </div>
                    <h1 class="login-title">Welcome Back!</h1>
                    <p class="login-subtitle">Sign in to track your academic progress</p>
                </div>

                <div class="login-form">
                    <div class="input-group">
                        <label>Email Address</label>
                        <input type="email" id="loginEmail" placeholder="your.email@example.com">
                    </div>
                    <div class="input-group">
                        <label>Password</label>
                        <input type="password" id="loginPassword" placeholder="Enter your password">
                    </div>
                    <button class="btn-primary" onclick="loginWithEmail()">Sign In</button>

                    <div class="divider">
                        <span>or continue with</span>
                    </div>

                    <button class="btn-google" onclick="loginWithGoogle()">
                        <span class="google-icon">G</span>
                        Sign in with Google
                    </button>

                    <p class="login-footer">Don't have an account? <a href="#" onclick="showSignup()">Sign up</a></p>
                </div>
            </div>
        </div>


        <div id="signup" class="page">
            <div class="login-container">
                <div class="login-header">
                    <div class="login-icon">
                        <span class="wingding">‚ú®</span>
                    </div>
                    <h1 class="login-title">Create Account</h1>
                    <p class="login-subtitle">Join us to start tracking your grades</p>
                </div>

                <div class="login-form">
                    <div class="input-group">
                        <label>Full Name</label>
                        <input type="text" id="signupName" placeholder="John Doe">
                    </div>
                    <div class="input-group">
                        <label>Email Address</label>
                        <input type="email" id="signupEmail" placeholder="your.email@example.com">
                    </div>
                    <div class="input-group">
                        <label>Password</label>
                        <input type="password" id="signupPassword" placeholder="Create a password">
                    </div>
                    <button class="btn-primary" onclick="signupWithEmail()">Create Account</button>

                    <div class="divider">
                        <span>or continue with</span>
                    </div>

                    <button class="btn-google" onclick="loginWithGoogle()">
                        <span class="google-icon">G</span>
                        Sign up with Google
                    </button>

                    <p class="login-footer">Already have an account? <a href="#" onclick="showLogin()">Sign in</a></p>
                </div>
            </div>
        </div>


        <div id="dashboard" class="page">
            <div class="profile-header">
                <div class="profile-info">
                    <div class="avatar">
                        <span class="wingding">‚úì</span>
                    </div>
                    <div class="greeting-text">
                        <h2 id="userGreeting">Hello, Student!</h2>
                        <p id="dashDate"></p>
                    </div>
                </div>
                <div class="search-icon" onclick="logout()">
                    <span class="wingding">üîì</span>
                </div>
            </div>

            <div class="featured-banner">
                <div class="banner-content">
                    <h3>Academic Progress</h3>
                    <p>Track your grades and GWA</p>
                </div>
                <div class="banner-illustration">
                    <span class="wingding">üìä</span>
                </div>
            </div>

            <h3 class="section-title">Your Tools</h3>
            <div class="plan-grid">
                <div class="plan-card" onclick="navigateTo('gwa')">
                    <div class="plan-card-label">Calculator</div>
                    <div class="plan-card-title">GWA Tracker</div>
                    <div class="plan-card-icon">
                        <span class="wingding">üìê</span>
                    </div>
                </div>
                <div class="plan-card" onclick="navigateTo('grade')">
                    <div class="plan-card-label">Calculator</div>
                    <div class="plan-card-title">Grade Breakdown</div>
                    <div class="plan-card-icon">
                        <span class="wingding">üéØ</span>
                    </div>
                </div>
            </div>
        </div>


        <div id="gwa" class="page">
            <div class="stats-header">
                <div class="ring-container">
                    <svg width="280" height="280" id="gwaRing"></svg>
                    <div class="ring-center">
                        <div class="gwa-number" id="gwaNumber">0.00</div>
                        <div class="gwa-label">your GWA score</div>
                    </div>
                    <div class="ring-icons" id="ringIcons"></div>
                </div>
            </div>

            <div class="subjects-section" id="subjectsList"></div>
        </div>


        <div id="grade" class="page">
            <div class="percentage-display-card">
                <div class="percentage-ring">
                    <svg width="320" height="320" id="percentageRing"></svg>
                    <div class="percentage-center">
                        <div class="percentage-number" id="percentageNum">0<span>%</span></div>
                        <div class="percentage-label">Raw Score</div>
                        <div class="grade-result" id="gradeNum">Grade: -</div>
                    </div>
                </div>
            </div>

            <div class="subject-select-card">
                <label>Select Subject</label>
                <div class="custom-select">
                    <select id="gradeSubjectSelect" onchange="loadGradeComponents()">
                        <option value="">Choose a subject...</option>
                    </select>
                </div>
            </div>

            <div id="gradeComponentsContainer" style="display: none;">
                <div id="componentsList"></div>

                <div class="conversion-table">
                    <h4>Grade Conversion</h4>
                    <div id="conversionTable"></div>
                </div>
            </div>
        </div>
    </div>


    <div class="bottom-nav" id="bottomNav" style="display: none;">
        <div class="nav-item active" onclick="navigateTo('dashboard')">
            <div class="icon">
                <span class="wingding">üè†</span>
            </div>
            <div class="label">Home</div>
        </div>
        <div class="nav-item" onclick="navigateTo('gwa')">
            <div class="icon">
                <span class="wingding">üìê</span>
            </div>
            <div class="label">GWA</div>
        </div>
        <div class="nav-item" onclick="navigateTo('grade')">
            <div class="icon">
                <span class="wingding">üéØ</span>
            </div>
            <div class="label">Grade</div>
        </div>
    </div>

    <script src="script.js"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-analytics.js";
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBlbnrJZ5UJy3wjM8Bnxyq0Vs3P27oBDzA",
            authDomain: "gwakawa-98428.firebaseapp.com",
            projectId: "gwakawa-98428",
            storageBucket: "gwakawa-98428.firebasestorage.app",
            messagingSenderId: "622489869959",
            appId: "1:622489869959:web:538326d2e7678705552222",
            measurementId: "G-SDN67JX2DB"
        };

        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();


        window.firebaseAuth = auth;
        window.googleProvider = provider;
        window.signInWithEmailAndPassword = signInWithEmailAndPassword;
        window.createUserWithEmailAndPassword = createUserWithEmailAndPassword;
        window.signInWithPopup = signInWithPopup;
        window.signOutUser = signOut;


        onAuthStateChanged(auth, (user) => {
            if (user) {
                window.currentUser = user;
                document.getElementById('bottomNav').style.display = 'flex';
                const name = user.displayName || user.email.split('@')[0];
                document.getElementById('userGreeting').textContent = `Hello, ${name}!`;
            } else {
                window.currentUser = null;
                document.getElementById('bottomNav').style.display = 'none';
            }
        });
    </script>
</body>

</html>